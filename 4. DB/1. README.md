# SSAFY 14기 DB 라이브 자료

| 진행일 | 주제            |
| ------ | --------------- |
| 11/03 | SQL 01 |
| 11/04 | SQL 02 |
1. DDL : CREATE, DROP, ALTER 
   1. CREATE TABEL 
      1. 기본 ![1](./1104_1.png)
      2. 참고 ![2](./1104_2.png)
   2. ALTER TABEL 
      1. 추가
         1. 목록 ![3](./1104_3.png)
         2. 예시 ![4](./1104_4.png)
      2. 이름변경: ![5](./1104_5.png)
   3. DROP 
      1. 삭제 : ![6](./1104_6.png)
   4.  INSERT
       1. # ATLER에서 ADD 할 때는 한 번에 여러 필드를 추가할 수 없지만, INSERT는 가능하다. 8번 참조 
       2. ![9](./1104_9.png)
       3.  예시 ![7](./1104_7.png)
       4.  ![8](./1104_8.png)
   5.  UPDATE 
       1.  ![10](./1104_10.png)ㅜ
       2.  ![11](./1104_11.png)
   6. DELETE 
      1. ![12](./1104_12.png)
      2. ![13](./1104_13.png)
      3. 심화: ![14](./1104_14.png)
   7. JOIN 
      1.  INNER JOIN
         1. # 작성자 조회시 동명이인이라면? 15번 참조/ 16번 솔루션 
         2. ![15](./1104_15.png)
         3. ![16](./1104_16.png)
         4. ![17](./1104_17.png)
         5. ![18](./1104_18.png)
         6. ![19](./1104_19.png)
         7. 이후 문제풀이 방법 ![20](./1104_20.png)
      2. LEFT JOIN : 왼쪽 다 출력 
         1. ![21](./1104_21.png)
# 활동정리 
![22](./1104_22.png)
1. DQL
2. DML


| 11/05 | Many to one relationships 01 |
| 11/06 | Many to one relationships 02 |
   1. User와 Article 모델 간의 N:1 관계 정의
      1. ![1](./1106_1.png)
      2. ![2](./1106_2.png)
      3. ![3](./1106_3.png)
      4. (순서) models.py 실행 -> forms.py 실행 
      5. 단, models.py 만 실행하는 경우 임시로 
      6. # 100% 출제 ![4](./1106_4.png)![5](./1106_5.png) 
| 11/10 | Many to many relationships 01 |
   1. 1:N은 댓글 // M:N 좋아요, 팔로우 
   2. M:N 관계, 의사:환자
      1. ![1](./1110_1.png)
         1. # 100% 출제 
         2. doctor.patient_set : 역참조, 의사가 환자볼 때, 왜? manytomany-- 가 환자에게 있다.
         3. patient.doctor_set : 참조, 환자가 의사볼 때, 왜? 상동. 
   3. 실습.
      1. python -m venv venv
      2. source venv/scripts/activate
      3. pip install django
      4. pip install ipython
      5. pip install django-extensions
      6. pip freeze > requirements.txt
         1. pip install -r requirements.txt
      7. $ django-admin startproject MANYTOMANY .
      8. $ python manage.py startapp hospitals
      9.  settings에서 istalled_apps에 설치 앱, 설치 패키지 추가. / time_zone 에서 수정 
      10. ![2](./1110_2.png)
      11. ![3](./1110_3.png)
      12. db에서 데이터 삭제
          1.  In [8]: doctor1.patient_set.remove(patient1)
          2.  

| 11/11 | Many to many relationships 02 |
   1. 협업시 주의사항 
      1. 기본적으로 db는 푸쉬하지 않는다.
         1. 그렇다면? 초기 데이터를 어떻게 옮겨 다니나? 
         2. json으로 저장한다. 
         3. dumpdata: 데이터 추출 /loaddata: 데이터 입력
         4. indent 4 : 각 계층마다 4개의 공백으로 들여쓰기(가독성 때문에)
         5. articles.fixtures 에다가 json 파일을 옮겨주세용
```
python manage.py dumpdata --indent 4 articles.article > articles.json
python manage.py dumpdata --indent 4 articles.comment > comments.json
python manage.py dumpdata --indent 4 accounts.user > users.json
```
         6. 이렇게 만든 3개의 json 파일을 갖고, clone 이후, 아래 코드로 데이터를 받습니다. 
```
python manage.py loaddata users.json
python manage.py loaddata articles.json
python manage.py loaddata comments.json
```
         7. 추가적으로, 한글이 호환성 문제 해결 방법.
            1. articles.json 파일 메모장으로 열기
            2. 다른이름으로 저장
            3. 인코딩 UTF-8로 설정하고 덮어쓰기

